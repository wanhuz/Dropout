Test provided should be treated as simple test as real condition is much more complex than what can be tested.
The purpose of this test is to isolate one component and test it using different code. 
At the end, guaratee can only be provided on real testing environment.